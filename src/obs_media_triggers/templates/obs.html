{% extends "base.html" %}

{% block title %}OBS clients{% endblock %}

{% block content %}
<h1 class="pb-3">OBS clients</h1>

{% with obs_clients = get_all_obs_clients() %}
<table class="table text-break">
  <thead>
    <tr>
      <th scope="col">Host</th>
      <th scope="col">Port</th>
      <th scope="col">Password</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>

  {% if obs_clients %}
  <tbody>
    {% for oc in obs_clients %}
    <tr>
      <td>{{oc.host}}</td>
      <td>{{oc.port}}</td>
      <td>{{'*' * oc.password.__len__()}}</td>
      <td class="w-75">
        {% if obs_manager.client_is_connected(oc.host, oc.port) %}
        <i class="fa-solid fa-play" style="color: #00d700;"></i>
        {% else %}
        <i class="fa-solid fa-pause" style="color: #FFD43B;"></i>
        {% endif %}

        <i class="fa-solid fa-pen-to-square" style="color: #37aaff;"></i>
        <form action="{{ url_for('view_obs.post_remove') }}" method="POST" novalidate>
          <button type="submit"><i class="fa-solid fa-trash" style="color: #ff0000;"></i></button>
          <input type="hidden" name="host" id="host" value="{{oc.host}}" class="invisible" style="width: 0; height: 0;">
          <input type="hidden" name="port" id="port" value="{{oc.port}}" class="invisible" style="width: 0; height: 0;">
        </form>
      </td>
    </tr>

    {% endfor %}
  </tbody>
</table>
{% endif %}

<div class="col-12 mt-4">
  <a href="{{ url_for('view_obs.post_add') }}" class="btn btn-success">+ New Client</a>
</div>
{% endwith %}
{% endblock %}